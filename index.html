<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tailwindcss/dist/tailwind.min.css">
    <link rel="icon" href="./img/Another_one_logo_1020Hivezzz.png" type="image/x-icon">
    
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <title>Attendance Registration</title>
</head>
<body class="bg-white h-screen flex flex-col items-center justify-center">
    <nav class="bg-1020-hivezzz-500 flex items-center justify-center">
      <a href="https://www.seidet.org">
        <img src="./img/logo_high_-_Copy__2_-removebg-preview.png" alt="seidet_logo" class="h-60">
      </a>
      
    </nav>
    <form action="https://sheetdb.io/api/v1/g2j6zwb9elts3" method="post" id="sheetdb-form"class="bg-indigo-900 p-6 rounded-lg mt-8">
      
      <div class="mb-4">
        <label class="block text-white font-medium mb-2">Name & Surname</label>
        <input class="border border-gray-400 p-2 rounded-lg w-full" type="text" id="name" name="data[name]">
      </div>
      <div class="mb-4">
        <label class="block text-white font-medium mb-2">Organization</label>
        <input class="border border-gray-400 p-2 rounded-lg w-full" type="text" id="organization" name="data[organization]">
      </div>
      <div class="mb-4">
        <label class="block text-white font-medium mb-2">Phone Number</label>
        <input class="border border-gray-400 p-2 rounded-lg w-full" type="text" id="phone" name="data[phone]">
      </div>
      <div class="mb-4">
        <label class="block text-white font-medium mb-2">Email</label>
        <input class="border border-gray-400 p-2 rounded-lg w-full" type="text" id="email" name="data[email]">
      </div> 
      <button id='submit-button'class="bg-black text-white p-2 rounded-lg hover:bg-emerald-600" onclick="submitForm()">Confirm</button>
      
    </form>

    <footer>
      <div class="container mt-8 mr-2.5">
        <div class="row">
          <div class="col-md-6 text-black"> 
            <a href="https://www.seidet.org">
            <p>&copy; Seidet.</a> All rights reserved. Created by <a href="https://www.linkedin.com/in/kagisho-phahlamohlaka-50130b192/"> <strong>Kagisho (Taumang) Phahlamohlaka</strong></a></p>
          </div>
          <div id="overlay" class="hidden fixed inset-0 bg-gray-800 bg-opacity-50 flex items-center justify-center">
            <div class="bg-white p-4 rounded-lg shadow-lg">
              <p class="text-center">Successful! Thank you for joining us Today!</p>
            </div>
          </div>
        </div>
      </div>
    </footer>
    

    <script>

const generateCode = () => {
  // Generate a random 10-digit code
  var code = '';
  for (var i = 0; i < 10; i++) {
    code += Math.floor(Math.random() * 10);
  }
  return code;
}


const submitForm = (event) => {
  // Prevent default form submission behavior
  event.preventDefault();

   // Generate a unique 10-digit code
   var code = generateCode();



  // Set the code value to the hidden input field in the form
  var form = document.getElementById('sheetdb-form');
  var input = document.createElement('input');
  var overlay = document.getElementById('overlay');
  input.type = 'hidden';
  input.name = 'data[code]';
  input.value = code;
  form.appendChild(input);
  
  overlay.classList.remove('hidden');
  setTimeout(() => {
    overlay.classList.add('hidden');
  }, 4000); // 3000 milliseconds (3 seconds)


  // Display the code to the user in a new input field
  var codeInput = document.createElement('input');
  codeInput.type = 'text';
  codeInput.value = code;
  codeInput.readOnly = true;
  form.insertBefore(codeInput, form.firstChild);

  // Submit the form
  form.submit();

  // Clear all text fields on the page
  var inputs = document.querySelectorAll('input[type="text"]');
  for (var i = 0; i < inputs.length; i++) {
    inputs[i].value = '';
  }

  // Display success message to user

}

// Attach event listener to form submission button
var submitButton = document.getElementById('submit-button');
submitButton.addEventListener('click', submitForm);


    </script>
  </body>
</html>
